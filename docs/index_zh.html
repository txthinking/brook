<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sindresorhus/github-markdown-css@master/github-markdown.css">
        <title>Brook</title>
		
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-R3M673HK5V"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-R3M673HK5V');
		</script>

        <style>
                .markdown-body {
                    box-sizing: border-box;
                    min-width: 200px;
                    max-width: 980px;
                    margin: 0 auto;
                    padding: 45px;
                }

                @media (max-width: 767px) {
                    .markdown-body {
                        padding: 15px;
                    }
                }
		</style>
        <body class="markdown-body"><h1><a name="brook" class="anchor" href="#brook" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Brook</h1>



<p><a href="index.html" rel="nofollow">ğŸ‡¬ğŸ‡§ English</a></p>

<p><a href="https://travis-ci.org/txthinking/brook" rel="nofollow"><img src="https://travis-ci.org/txthinking/brook.svg?branch=master" alt="Build Status"></a>
<a href="http://www.gnu.org/licenses/gpl-3.0" rel="nofollow"><img src="https://img.shields.io/badge/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE-GPL%20v3-blue.svg"></a></p>

<p><a href="https://t.me/brookgroup" rel="nofollow">ğŸ¤ Telegram</a>
<a href="https://join.txthinking.com" rel="nofollow">ğŸ’¬ Chat</a>
<a href="https://www.youtube.com/txthinking" rel="nofollow">ğŸ©¸ Youtube</a>
<a href="https://github.com/sponsors/txthinking" rel="nofollow">â¤ï¸ Sponsor</a></p>

<p>Brook æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å¼ºåŠ å¯†æ— ç‰¹å¾çš„ä»£ç†è½¯ä»¶. Keep it simple, stupid.</p>

<p><a href="https://t.me/txthinking_news" rel="nofollow">ğŸ—£ è®¢é˜…å…¬å‘Š</a></p>
<h1><a name="table-of-contents" class="anchor" href="#table-of-contents" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
Table of Contents</h1>

<ul>
<li><a href="#%E5%AE%89%E8%A3%85" rel="nofollow">å®‰è£…</a>

<ul>
<li><a href="#%E5%AE%89%E8%A3%85-brook-%E5%91%BD%E4%BB%A4" rel="nofollow">å®‰è£… brook å‘½ä»¤</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-brook-%E5%9B%BE%E5%BD%A2%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow">å®‰è£… Brook å›¾å½¢å®¢æˆ·ç«¯</a></li>
</ul></li>
<li><a href="#brook-%E5%AD%90%E5%91%BD%E4%BB%A4-%E5%92%8C-%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0" rel="nofollow">brook å­å‘½ä»¤ å’Œ å‘½ä»¤å‚æ•°</a></li>
<li><a href="#brook-%E8%A7%84%E5%88%99%E6%A0%BC%E5%BC%8F" rel="nofollow">brook è§„åˆ™æ ¼å¼</a></li>
<li><a href="#%E4%BE%8B%E5%AD%90" rel="nofollow">ä¾‹å­</a>

<ul>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-server" rel="nofollow">è¿è¡Œ brook server</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-wsserver" rel="nofollow">è¿è¡Œ brook wsserver</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-wssserver-%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6" rel="nofollow">è¿è¡Œ brook wssserver: è‡ªåŠ¨ç­¾å‘ä¿¡ä»»è¯ä¹¦</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-wssserver-%E4%BD%BF%E7%94%A8%E5%B7%B2%E6%9C%89%E7%9A%84%E4%BF%A1%E4%BB%BB%E6%9C%BA%E6%9E%84%E7%AD%BE%E5%8F%91%E7%9A%84%E8%AF%81%E4%B9%A6" rel="nofollow">è¿è¡Œ brook wssserver ä½¿ç”¨å·²æœ‰çš„ä¿¡ä»»æœºæ„ç­¾å‘çš„è¯ä¹¦</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-wssserver-%E8%87%AA%E5%B7%B1%E7%AD%BE%E5%8F%91%E9%9D%9E%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6-%E7%94%9A%E8%87%B3%E4%B8%8D%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9F%9F%E5%90%8D%E4%B9%9F%E5%8F%AF%E4%BB%A5" rel="nofollow">è¿è¡Œ brook wssserver è‡ªå·±ç­¾å‘éä¿¡ä»»è¯ä¹¦, ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥</a></li>
<li><a href="#withoutbrookprotocol" rel="nofollow">withoutBrookProtocol</a></li>
<li><a href="#withoutbrookprotocol-%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6" rel="nofollow">withoutBrookProtocol è‡ªåŠ¨ç­¾å‘ä¿¡ä»»è¯ä¹¦</a></li>
<li><a href="#withoutbrookprotocol-%E4%BD%BF%E7%94%A8%E5%B7%B2%E6%9C%89%E7%9A%84%E4%BF%A1%E4%BB%BB%E6%9C%BA%E6%9E%84%E7%AD%BE%E5%8F%91%E7%9A%84%E8%AF%81%E4%B9%A6" rel="nofollow">withoutBrookProtocol ä½¿ç”¨å·²æœ‰çš„ä¿¡ä»»æœºæ„ç­¾å‘çš„è¯ä¹¦</a></li>
<li><a href="#withoutbrookprotocol-%E8%87%AA%E5%B7%B1%E7%AD%BE%E5%8F%91%E9%9D%9E%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6-%E7%94%9A%E8%87%B3%E4%B8%8D%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9F%9F%E5%90%8D%E4%B9%9F%E5%8F%AF%E4%BB%A5" rel="nofollow">withoutBrookProtocol è‡ªå·±ç­¾å‘éä¿¡ä»»è¯ä¹¦, ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥</a></li>
<li><a href="#brook-server-wsserver-wssserver-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%BD%AC%E5%8F%91%E7%BB%99%E5%8F%A6%E5%A4%96%E7%9A%84-socks5-server" rel="nofollow">brook server wsserver wssserver æœåŠ¡ç«¯è½¬å‘ç»™å¦å¤–çš„ socks5 server</a></li>
<li><a href="#brook-server-wsserver-wssserver-%E5%9C%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%B1%8F%E8%94%BD%E5%9F%9F%E5%90%8D%E5%92%8C-ip-%E5%88%97%E8%A1%A8" rel="nofollow">brook server wsserver wssserver åœ¨æœåŠ¡ç«¯å±è”½åŸŸåå’Œ IP åˆ—è¡¨</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-socks5-%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E6%A0%87%E5%87%86-socks5-server" rel="nofollow">è¿è¡Œ brook socks5, ä¸€ä¸ªç‹¬ç«‹çš„æ ‡å‡† socks5 server</a></li>
<li><a href="#%E8%BF%90%E8%A1%8C-brook-socks5-%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E6%A0%87%E5%87%86-socks5-server-%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81" rel="nofollow">è¿è¡Œ brook socks5, ä¸€ä¸ªç‹¬ç«‹çš„æ ‡å‡† socks5 server, æŒ‡å®šç”¨æˆ·åå’Œå¯†ç </a></li>
<li><a href="#brook-relayoverbrook-%E4%B8%AD%E7%BB%A7%E4%BB%BB%E4%BD%95-tcp-%E5%92%8C-udp-server-%E8%AE%A9%E5%85%B6%E8%B5%B0-brook-%E5%8D%8F%E8%AE%AE-%E5%AE%83%E4%B8%8E-brook-server-wsserver-wssserver-%E4%B8%80%E8%B5%B7%E5%B7%A5%E4%BD%9C" rel="nofollow">brook relayoverbrook ä¸­ç»§ä»»ä½• TCP å’Œ UDP server, è®©å…¶èµ° brook åè®®. å®ƒä¸ brook server wsserver wssserver ä¸€èµ·å·¥ä½œ</a></li>
<li><a href="#brook-dns-%E7%94%A8%E6%9D%A5%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8A%A0%E5%AF%86-dns-server-tcp-and-udp-%E5%AE%83%E4%B8%8E-brook-server-wsserver-wssserver-%E4%B8%80%E8%B5%B7%E5%B7%A5%E4%BD%9C" rel="nofollow">brook dns ç”¨æ¥åˆ›å»ºä¸€ä¸ªåŠ å¯† DNS Server, TCP and UDP, å®ƒä¸ brook server wsserver wssserver ä¸€èµ·å·¥ä½œ</a></li>
<li><a href="#brook-tproxy-%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86%E7%BD%91%E5%85%B3%E5%9C%A8%E5%AE%98%E7%BD%91%E5%8E%9F%E7%89%88-openwrt" rel="nofollow">brook tproxy é€æ˜ä»£ç†ç½‘å…³åœ¨å®˜ç½‘åŸç‰ˆ OpenWrt</a></li>
<li><a href="#brook-tproxy-%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86%E7%BD%91%E5%85%B3%E5%9C%A8-ubuntu" rel="nofollow">brook tproxy é€æ˜ä»£ç†ç½‘å…³åœ¨ Ubuntu</a></li>
<li><a href="#%E5%AE%98%E7%BD%91%E5%8E%9F%E7%89%88-openwrt-%E5%9B%BE%E5%BD%A2%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow">å®˜ç½‘åŸç‰ˆ OpenWrt å›¾å½¢å®¢æˆ·ç«¯</a></li>
<li><a href="#brook-relay-%E5%8F%AF%E4%BB%A5%E4%B8%AD%E7%BB%A7%E4%BB%BB%E4%BD%95-tcp-%E5%92%8C-udp-server-%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%8A%9F%E8%83%BD-%E5%AE%83%E4%B8%8D%E4%BE%9D%E8%B5%96-brook-server-wsserver-wssserver" rel="nofollow">brook relay å¯ä»¥ä¸­ç»§ä»»ä½• TCP å’Œ UDP server, è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½, å®ƒä¸ä¾èµ– brook server wsserver wssserver</a></li>
<li><a href="#brook-socks5tohttp-%E5%B0%86-socks5-proxy-%E8%BD%AC%E6%8D%A2%E4%B8%BA-http-proxy" rel="nofollow">brook socks5tohttp å°† socks5 proxy è½¬æ¢ä¸º http proxy</a></li>
<li><a href="#brook-pac-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-pac-server" rel="nofollow">brook pac åˆ›å»ºä¸€ä¸ª pac server</a></li>
<li><a href="#brook-pac-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-pac-%E6%96%87%E4%BB%B6" rel="nofollow">brook pac åˆ›å»ºä¸€ä¸ª pac æ–‡ä»¶</a></li>
<li><a href="#ipv6" rel="nofollow">IPv6</a></li>
<li><a href="#nat-type" rel="nofollow">NAT Type</a></li>
</ul></li>
<li><a href="#%E4%BD%BF%E7%94%A8-joker-%E8%BF%90%E8%A1%8C%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B" rel="nofollow">ä½¿ç”¨ joker è¿è¡Œå®ˆæŠ¤è¿›ç¨‹</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-jinbe-%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4" rel="nofollow">ä½¿ç”¨ jinbe æ·»åŠ å¼€æœºè‡ªå¯åŠ¨å‘½ä»¤</a></li>
<li><a href="#protocol" rel="nofollow">Protocol</a>

<ul>
<li><a href="#brook-server-protocol" rel="nofollow">brook server protocol</a></li>
<li><a href="#brook-wsserver-protocol" rel="nofollow">brook wsserver protocol</a></li>
<li><a href="#brook-wssserver-protocol" rel="nofollow">brook wssserver protocol</a></li>
<li><a href="#withoutbrookprotocol-protocol" rel="nofollow">withoutBrookProtocol protocol</a></li>
<li><a href="#brook-link-protocol" rel="nofollow">brook link protocol</a></li>
</ul></li>
<li><a href="#%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90" rel="nofollow">å…¶ä»–èµ„æº</a></li>
</ul>
<h2><a name="å®‰è£…" class="anchor" href="#%E5%AE%89%E8%A3%85" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
å®‰è£…</h2>
<h3><a name="å®‰è£…-brook-å‘½ä»¤" class="anchor" href="#%E5%AE%89%E8%A3%85-brook-%E5%91%BD%E4%BB%A4" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
å®‰è£… brook å‘½ä»¤</h3>

<blockquote>
<p><a href="https://github.com/txthinking/nami" rel="nofollow">nami</a> å¥¹ä¼šè‡ªåŠ¨å¸®ä½ ä¸‹è½½é€‚ç”¨ä½ ç³»ç»Ÿçš„æœ€æ–°ç‰ˆ brook å‘½ä»¤æ–‡ä»¶. å¦‚æœä½ çš„ç³»ç»Ÿæ˜¯ Windows, ä½ éœ€è¦åœ¨ <a href="https://gitforwindows.org" rel="nofollow">Git Bash</a> é‡Œé¢è¿è¡Œ<br/>
æˆ–<br/>
å¦‚æœä½ çš„ç³»ç»Ÿä¸æ˜¯ Linux, MacOS, Windows, æˆ–ä¸æƒ³ç”¨ nami, ä½ å¯ä»¥å» <a href="https://github.com/txthinking/brook/releases" rel="nofollow">releases</a> è‡ªå·±ä¸‹è½½å‘½ä»¤æ–‡ä»¶<br/>
æˆ–<br/>
ä¸€é”®è„šæœ¬ï¼Œç›®å‰ä»…æ”¯æŒéƒ¨åˆ†å‘½ä»¤å‚æ•°: <code>bash &lt;(curl https://bash.ooo/brook.sh)</code><br/>
æˆ–<br/>
Archlinux: <code>pacman -S brook</code><br/>
æˆ–<br/>
brew: <code>brew install brook</code><br/><br/>
å»ºè®®ä½¿ç”¨ root ç”¨æˆ·è¿è¡Œå‘½ä»¤<br/></p>
</blockquote>

<p>å®‰è£… nami</p>

<pre><code>bash &lt;(curl https://bash.ooo/nami.sh)
</code></pre>

<p>ä½¿ç”¨ nami å®‰è£… brook</p>

<pre><code>nami install brook
</code></pre>
<h3><a name="å®‰è£…-brook-å›¾å½¢å®¢æˆ·ç«¯" class="anchor" href="#%E5%AE%89%E8%A3%85-brook-%E5%9B%BE%E5%BD%A2%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
å®‰è£… Brook å›¾å½¢å®¢æˆ·ç«¯</h3>

<p><a href="https://github.com/txthinking/brook/releases/latest/download/Brook.dmg" rel="nofollow">macOS</a>
<a href="https://github.com/txthinking/brook/releases/latest/download/Brook.exe" rel="nofollow">Windows</a>
<a href="https://github.com/txthinking/brook/releases/latest/download/Brook.apk" rel="nofollow">Android</a>
<a href="https://apps.apple.com/us/app/brook-a-cross-platform-proxy/id1216002642" rel="nofollow">iOS &amp; M1 Mac</a>
<a href="#%E5%AE%98%E7%BD%91%E5%8E%9F%E7%89%88-openwrt-%E5%9B%BE%E5%BD%A2%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow">OpenWrt</a></p>

<blockquote>
<p>Windows éœ€è¦ä½ å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆ(åŸºäº chromium çš„é‚£æ¬¾)çš„ Edge æµè§ˆå™¨<br/>
è¯·ä½¿ç”¨éä¸­å›½å¤§é™† Apple ID ä¸‹è½½.</p>
</blockquote>

<p>è¿™é‡Œæœ‰ <a href="https://talks.txthinking.com/articles/brook.article" rel="nofollow">brook å›¾å½¢å®¢æˆ·ç«¯å·¥ä½œåŸç†</a></p>
<h2><a name="brook-å­å‘½ä»¤-å’Œ-å‘½ä»¤å‚æ•°" class="anchor" href="#brook-%E5%AD%90%E5%91%BD%E4%BB%A4-%E5%92%8C-%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook <code>å­å‘½ä»¤</code> å’Œ <code>å‘½ä»¤å‚æ•°</code></h2>

<ul>
<li>æŸ¥çœ‹æ‰€æœ‰çš„<code>å­å‘½ä»¤</code>: <code>brook --help</code></li>
<li>æŸ¥çœ‹æŸä¸ª<code>å­å‘½ä»¤</code>çš„å‚æ•°: <code>brook xxx --help</code></li>
</ul>
<h2><a name="brook-è§„åˆ™æ ¼å¼" class="anchor" href="#brook-%E8%A7%84%E5%88%99%E6%A0%BC%E5%BC%8F" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook è§„åˆ™æ ¼å¼</h2>

<p>æœ‰ä¸‰ç§è§„åˆ™æ–‡ä»¶</p>

<ul>
<li>åŸŸååˆ—è¡¨: ä¸€è¡Œä¸€ä¸ªåŸŸåï¼Œåç¼€åŒ¹é…æ¨¡å¼ã€‚å¯ä»¥æ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ HTTPS URL</li>
<li>CIDR v4 åˆ—è¡¨: ä¸€è¡Œä¸€ä¸ª CIDRã€‚å¯ä»¥æ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ HTTPS URL</li>
<li>CIDR v6 åˆ—è¡¨: ä¸€è¡Œä¸€ä¸ª CIDRã€‚å¯ä»¥æ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ HTTPS URL</li>
</ul>

<p>è§„åˆ™æ–‡ä»¶å¯ç”¨äº</p>

<ul>
<li>æœåŠ¡ç«¯å±è”½åŸŸåå’Œ IP</li>
<li>brook dns åˆ†æµï¼Œå±è”½åŸŸå</li>
<li>brook tproxy åˆ†æµï¼Œå±è”½åŸŸå</li>
<li>OpenWrt åˆ†æµï¼Œå±è”½åŸŸå</li>
<li>brook å›¾å½¢å®¢æˆ·ç«¯åˆ†æµï¼Œå±è”½åŸŸå</li>
</ul>
<h2><a name="ä¾‹å­" class="anchor" href="#%E4%BE%8B%E5%AD%90" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
ä¾‹å­</h2>

<p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸ç”¨åœºæ™¯å‘½ä»¤çš„ä¾‹å­, æ³¨æ„è‡ªå·±æ›¿æ¢ç¤ºä¾‹ä¸­çš„ IPï¼Œç«¯å£ï¼Œå¯†ç ï¼ŒåŸŸåï¼Œè¯ä¹¦è·¯å¾„ç­‰å‚æ•°</p>
<h3><a name="è¿è¡Œ-brook-server" class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-server" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook server</h3>

<pre><code>SRC --TCP--&gt; brook client/relayoverbrook/dns/tproxy/GUI Client --TCP(Brook Protocol)--&gt; brook server --TCP--&gt; DST
SRC --UDP--&gt; brook client/relayoverbrook/dns/tproxy/GUI Client --UDP/TCP(Brook Protocol)--&gt; brook server --UDP--&gt; DST
</code></pre>

<pre><code>brook server --listen :9999 --password hello
</code></pre>

<p>è·å– brook link è®© udp èµ° tcp <code>--udpovertcp</code></p>

<pre><code>brook link --server 1.2.3.4:9999 --password hello --udpovertcp --name &#39;my brook server&#39;
</code></pre>

<p>æˆ– è·å– brook link è®© udp èµ° udp</p>

<blockquote>
<p>ç¡®ä¿ä½ æœ¬åœ°åˆ°ä½ æœåŠ¡å™¨çš„ UDP ç½‘ç»œæ²¡æœ‰é—®é¢˜</p>
</blockquote>

<pre><code>brook link --server 1.2.3.4:9999 --password hello --name &#39;my brook server&#39;
</code></pre>
<h3><a name="è¿è¡Œ-brook-wsserver" class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-wsserver" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook wsserver</h3>

<pre><code>SRC --TCP--&gt; brook wsclient/relayoverbrook/dns/tproxy/GUI Client --TCP(Brook Protocol)--&gt; brook wsserver --TCP--&gt; DST
SRC --UDP--&gt; brook wsclient/relayoverbrook/dns/tproxy/GUI Client --TCP(Brook Protocol)--&gt; brook wsserver --UDP--&gt; DST
</code></pre>

<pre><code>brook wsserver --listen :9999 --password hello
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server ws://1.2.3.4:9999 --password hello --name &#39;my brook wsserver&#39;
</code></pre>

<p>æˆ–è·å– brook link æŒ‡å®šä¸ªåŸŸå, ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥</p>

<pre><code>brook link --server ws://hello.com:9999 --password hello --address 1.2.3.4:9999 --name &#39;my brook wsserver&#39;
</code></pre>
<h3><a name="è¿è¡Œ-brook-wssserver-è‡ªåŠ¨ç­¾å‘ä¿¡ä»»è¯ä¹¦" class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-wssserver-%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook wssserver: è‡ªåŠ¨ç­¾å‘ä¿¡ä»»è¯ä¹¦</h3>

<blockquote>
<p>æ³¨æ„ï¼šç¡®ä¿ä½ çš„åŸŸåå·²æˆåŠŸè§£æåˆ°ä½ æœåŠ¡å™¨çš„ IP, è‡ªåŠ¨ç­¾å‘è¯ä¹¦éœ€è¦é¢å¤–ç›‘å¬ 80 ç«¯å£</p>
</blockquote>

<pre><code>brook wssserver --domainaddress domain.com:443 --password hello
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server wss://domain.com:443 --password hello --name &#39;my brook wssserver&#39;
</code></pre>
<h3><a name="è¿è¡Œ-brook-wssserver-ä½¿ç”¨å·²æœ‰çš„ä¿¡ä»»æœºæ„ç­¾å‘çš„è¯ä¹¦" class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-wssserver-%E4%BD%BF%E7%94%A8%E5%B7%B2%E6%9C%89%E7%9A%84%E4%BF%A1%E4%BB%BB%E6%9C%BA%E6%9E%84%E7%AD%BE%E5%8F%91%E7%9A%84%E8%AF%81%E4%B9%A6" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook wssserver ä½¿ç”¨å·²æœ‰çš„ä¿¡ä»»æœºæ„ç­¾å‘çš„è¯ä¹¦</h3>

<blockquote>
<p>æ³¨æ„ï¼šç¡®ä¿ä½ çš„åŸŸåå·²æˆåŠŸè§£æåˆ°ä½ æœåŠ¡å™¨çš„ IP</p>
</blockquote>

<pre><code>brook wssserver --domainaddress domain.com:443 --password hello --cert /root/cert.pem --certkey /root/certkey.pem
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server wss://domain.com:443 --password hello --name &#39;my brook wssserver&#39;
</code></pre>
<h3><a name="è¿è¡Œ-brook-wssserver-è‡ªå·±ç­¾å‘éä¿¡ä»»è¯ä¹¦-ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥" class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-wssserver-%E8%87%AA%E5%B7%B1%E7%AD%BE%E5%8F%91%E9%9D%9E%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6-%E7%94%9A%E8%87%B3%E4%B8%8D%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9F%9F%E5%90%8D%E4%B9%9F%E5%8F%AF%E4%BB%A5" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook wssserver è‡ªå·±ç­¾å‘éä¿¡ä»»è¯ä¹¦, ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥</h3>

<p>å®‰è£… <a href="https://github.com/txthinking/mad" rel="nofollow">mad</a></p>

<pre><code>nami install mad
</code></pre>

<p>ä½¿ç”¨ mad ç”Ÿæˆæ ¹è¯ä¹¦</p>

<pre><code>mad ca --ca /root/ca.pem --key /root/cakey.pem
</code></pre>

<p>ä½¿ç”¨ mad ç”±æ ¹è¯ä¹¦æ´¾å‘ domain.com è¯ä¹¦</p>

<pre><code>mad cert --ca /root/ca.pem --ca_key /root/cakey.pem --cert /root/cert.pem --key /root/certkey.pem --domain domain.com
</code></pre>

<p>è·å– brook link ä½¿ç”¨ <code>--insecure</code></p>

<pre><code>brook link --server wss://domain.com:443 --password hello --name &#39;my brook wssserver&#39; --address 1.2.3.4:443 --insecure
</code></pre>

<p>æˆ– è·å– brook link ä½¿ç”¨ <code>--ca</code></p>

<pre><code>brook link --server wss://domain.com:443 --password hello --name &#39;my brook wssserver&#39; --address 1.2.3.4:443 --ca /root/ca.pem
</code></pre>
<h3><a name="withoutbrookprotocol" class="anchor" href="#withoutbrookprotocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
withoutBrookProtocol</h3>

<p>æ€§èƒ½æ›´å¥½ï¼Œä½†æ•°æ®ä¸ä½¿ç”¨ Brook åè®®è¿›è¡Œå¼ºåŠ å¯†ã€‚æ‰€ä»¥è¯·ä½¿ç”¨è¯ä¹¦åŠ å¯†ï¼Œå¹¶ä¸”ä¸å»ºè®®--withoutBrookProtocol å’Œ--insecure ä¸€èµ·ä½¿ç”¨</p>
<h3><a name="withoutbrookprotocol-è‡ªåŠ¨ç­¾å‘ä¿¡ä»»è¯ä¹¦" class="anchor" href="#withoutbrookprotocol-%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
withoutBrookProtocol è‡ªåŠ¨ç­¾å‘ä¿¡ä»»è¯ä¹¦</h3>

<blockquote>
<p>æ³¨æ„ï¼šç¡®ä¿ä½ çš„åŸŸåå·²æˆåŠŸè§£æåˆ°ä½ æœåŠ¡å™¨çš„ IP, è‡ªåŠ¨ç­¾å‘è¯ä¹¦éœ€è¦é¢å¤–ç›‘å¬ 80 ç«¯å£</p>
</blockquote>

<pre><code>brook wssserver --domainaddress domain.com:443 --password hello --withoutBrookProtocol
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server wss://domain.com:443 --password hello --withoutBrookProtocol
</code></pre>
<h3><a name="withoutbrookprotocol-ä½¿ç”¨å·²æœ‰çš„ä¿¡ä»»æœºæ„ç­¾å‘çš„è¯ä¹¦" class="anchor" href="#withoutbrookprotocol-%E4%BD%BF%E7%94%A8%E5%B7%B2%E6%9C%89%E7%9A%84%E4%BF%A1%E4%BB%BB%E6%9C%BA%E6%9E%84%E7%AD%BE%E5%8F%91%E7%9A%84%E8%AF%81%E4%B9%A6" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
withoutBrookProtocol ä½¿ç”¨å·²æœ‰çš„ä¿¡ä»»æœºæ„ç­¾å‘çš„è¯ä¹¦</h3>

<blockquote>
<p>æ³¨æ„ï¼šç¡®ä¿ä½ çš„åŸŸåå·²æˆåŠŸè§£æåˆ°ä½ æœåŠ¡å™¨çš„ IP</p>
</blockquote>

<pre><code>brook wssserver --domainaddress domain.com:443 --password hello --cert /root/cert.pem --certkey /root/certkey.pem --withoutBrookProtocol
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server wss://domain.com:443 --password hello --name &#39;my brook wssserver&#39; --withoutBrookProtocol
</code></pre>
<h3><a name="withoutbrookprotocol-è‡ªå·±ç­¾å‘éä¿¡ä»»è¯ä¹¦-ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥" class="anchor" href="#withoutbrookprotocol-%E8%87%AA%E5%B7%B1%E7%AD%BE%E5%8F%91%E9%9D%9E%E4%BF%A1%E4%BB%BB%E8%AF%81%E4%B9%A6-%E7%94%9A%E8%87%B3%E4%B8%8D%E6%98%AF%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9F%9F%E5%90%8D%E4%B9%9F%E5%8F%AF%E4%BB%A5" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
withoutBrookProtocol è‡ªå·±ç­¾å‘éä¿¡ä»»è¯ä¹¦, ç”šè‡³ä¸æ˜¯ä½ è‡ªå·±çš„åŸŸåä¹Ÿå¯ä»¥</h3>

<p>å®‰è£… <a href="https://github.com/txthinking/mad" rel="nofollow">mad</a></p>

<pre><code>nami install mad
</code></pre>

<p>ä½¿ç”¨ mad ç”Ÿæˆæ ¹è¯ä¹¦</p>

<pre><code>mad ca --ca /root/ca.pem --key /root/cakey.pem
</code></pre>

<p>ä½¿ç”¨ mad ç”±æ ¹è¯ä¹¦æ´¾å‘ domain.com è¯ä¹¦</p>

<pre><code>mad cert --ca /root/ca.pem --ca_key /root/cakey.pem --cert /root/cert.pem --key /root/certkey.pem --domain domain.com
</code></pre>

<p>è¿è¡Œ brook wssserver</p>

<pre><code>brook wssserver --domainaddress domain.com:443 --password hello --cert /root/cert.pem --certkey /root/certkey.pem --withoutBrookProtocol
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server wss://domain.com:443 --password hello --withoutBrookProtocol --address 1.2.3.4:443 --ca /root/ca.pem
</code></pre>
<h3><a name="brook-server-wsserver-wssserver-æœåŠ¡ç«¯è½¬å‘ç»™å¦å¤–çš„-socks5-server" class="anchor" href="#brook-server-wsserver-wssserver-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%BD%AC%E5%8F%91%E7%BB%99%E5%8F%A6%E5%A4%96%E7%9A%84-socks5-server" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook server wsserver wssserver æœåŠ¡ç«¯è½¬å‘ç»™å¦å¤–çš„ socks5 server</h3>

<ul>
<li>--toSocks5</li>
<li>--toSocks5Username</li>
<li>--toSocks5Password</li>
</ul>
<h3><a name="brook-server-wsserver-wssserver-åœ¨æœåŠ¡ç«¯å±è”½åŸŸåå’Œ-ip-åˆ—è¡¨" class="anchor" href="#brook-server-wsserver-wssserver-%E5%9C%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%B1%8F%E8%94%BD%E5%9F%9F%E5%90%8D%E5%92%8C-ip-%E5%88%97%E8%A1%A8" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook server wsserver wssserver åœ¨æœåŠ¡ç«¯å±è”½åŸŸåå’Œ IP åˆ—è¡¨</h3>

<ul>
<li>--blockDomainList</li>
<li>--blockCIDR4List</li>
<li>--blockCIDR6List</li>
<li>--updateListInterval</li>
</ul>
<h3><a name="è¿è¡Œ-brook-socks5-ä¸€ä¸ªç‹¬ç«‹çš„æ ‡å‡†-socks5-server" class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-socks5-%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E6%A0%87%E5%87%86-socks5-server" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook socks5, ä¸€ä¸ªç‹¬ç«‹çš„æ ‡å‡† socks5 server</h3>

<pre><code>SRC --TCP--&gt; brook socks5 --TCP--&gt; DST
SRC --UDP--&gt; brook socks5 --UDP--&gt; DST
</code></pre>

<pre><code>brook socks5 --listen :1080 --socks5ServerIP 1.2.3.4
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server socks5://1.2.3.4:1080
</code></pre>
<h3><a name="è¿è¡Œ-brook-socks5-ä¸€ä¸ªç‹¬ç«‹çš„æ ‡å‡†-socks5-server-æŒ‡å®šç”¨æˆ·åå’Œå¯†ç " class="anchor" href="#%E8%BF%90%E8%A1%8C-brook-socks5-%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E6%A0%87%E5%87%86-socks5-server-%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
è¿è¡Œ brook socks5, ä¸€ä¸ªç‹¬ç«‹çš„æ ‡å‡† socks5 server, æŒ‡å®šç”¨æˆ·åå’Œå¯†ç </h3>

<pre><code>brook socks5 --listen :1080 --socks5ServerIP 1.2.3.4 --username hello --password world
</code></pre>

<p>è·å– brook link</p>

<pre><code>brook link --server socks5://1.2.3.4:1080 --username hello --password world
</code></pre>
<h3><a name="brook-relayoverbrook-ä¸­ç»§ä»»ä½•-tcp-å’Œ-udp-server-è®©å…¶èµ°-brook-åè®®-å®ƒä¸-brook-server-wsserver-wssserver-ä¸€èµ·å·¥ä½œ" class="anchor" href="#brook-relayoverbrook-%E4%B8%AD%E7%BB%A7%E4%BB%BB%E4%BD%95-tcp-%E5%92%8C-udp-server-%E8%AE%A9%E5%85%B6%E8%B5%B0-brook-%E5%8D%8F%E8%AE%AE-%E5%AE%83%E4%B8%8E-brook-server-wsserver-wssserver-%E4%B8%80%E8%B5%B7%E5%B7%A5%E4%BD%9C" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook relayoverbrook ä¸­ç»§ä»»ä½• TCP å’Œ UDP server, è®©å…¶èµ° brook åè®®. å®ƒä¸ brook server wsserver wssserver ä¸€èµ·å·¥ä½œ</h3>

<pre><code>SRC --TCP--&gt; brook relayoverbrook --TCP(Brook Protocol) --&gt; brook server/wsserver/wssserver --TCP--&gt; DST
SRC --UDP--&gt; brook relayoverbrook --TCP/UDP(Brook Protocol) --&gt; brook server/wsserver/wssserver --UDP--&gt; DST
</code></pre>

<pre><code>brook relayoverbrook ... --from 127.0.0.1:5353 --to 8.8.8.8:53
</code></pre>
<h3><a name="brook-dns-ç”¨æ¥åˆ›å»ºä¸€ä¸ªåŠ å¯†-dns-server-tcp-and-udp-å®ƒä¸-brook-server-wsserver-wssserver-ä¸€èµ·å·¥ä½œ" class="anchor" href="#brook-dns-%E7%94%A8%E6%9D%A5%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8A%A0%E5%AF%86-dns-server-tcp-and-udp-%E5%AE%83%E4%B8%8E-brook-server-wsserver-wssserver-%E4%B8%80%E8%B5%B7%E5%B7%A5%E4%BD%9C" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook dns ç”¨æ¥åˆ›å»ºä¸€ä¸ªåŠ å¯† DNS Server, TCP and UDP, å®ƒä¸ brook server wsserver wssserver ä¸€èµ·å·¥ä½œ</h3>

<pre><code>SRC --TCP--&gt; brook dns --TCP(Brook Protocol) --&gt; brook server/wsserver/wssserver --TCP--&gt; DST
SRC --UDP--&gt; brook dns --TCP/UDP(Brook Protocol) --&gt; brook server/wsserver/wssserver --UDP--&gt; DST
</code></pre>

<pre><code>brook dns ... --listen 127.0.0.1:53
</code></pre>

<p>è§„åˆ™</p>

<ul>
<li>--dns</li>
<li>--dnsForBypass</li>
<li>--bypassDomainList</li>
<li>--blockDomainList</li>
</ul>
<h3><a name="brook-tproxy-é€æ˜ä»£ç†ç½‘å…³åœ¨å®˜ç½‘åŸç‰ˆ-openwrt" class="anchor" href="#brook-tproxy-%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86%E7%BD%91%E5%85%B3%E5%9C%A8%E5%AE%98%E7%BD%91%E5%8E%9F%E7%89%88-openwrt" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook tproxy é€æ˜ä»£ç†ç½‘å…³åœ¨å®˜ç½‘åŸç‰ˆ OpenWrt</h3>

<pre><code>opkg install ca-certificates openssl-util ca-bundle coreutils-nohup iptables-mod-tproxy
</code></pre>

<pre><code>brook tproxy --link &#39;brook://...&#39; --dnsListen :5353
</code></pre>

<ol>
<li>OpenWrt DNS forwardings: OpenWrt Web -&gt; Network -&gt; DHCP and DNS -&gt; General Settings -&gt; DNS forwardings -&gt; 127.0.0.1#5353</li>
<li>OpenWrt Ignore resolve file: OpenWrt Web -&gt; Network -&gt; DHCP and DNS -&gt; Resolv and Hosts Files -&gt; Ignore resolve file</li>
<li>é»˜èª, OpenWrt å°‡æœƒä¸‹ç™¼ router çš„ IP çš„ç‚ºé›»è…¦æˆ–æ‰‹æ©Ÿçš„ç¶²é—œå’Œ DNS</li>
</ol>

<p>è§„åˆ™</p>

<ul>
<li>--dnsForDefault</li>
<li>--dnsForBypass</li>
<li>--bypassDomainList</li>
<li>--bypassCIDR4List</li>
<li>--bypassCIDR6List</li>
<li>--blockDomainList</li>
</ul>
<h3><a name="brook-tproxy-é€æ˜ä»£ç†ç½‘å…³åœ¨-ubuntu" class="anchor" href="#brook-tproxy-%E9%80%8F%E6%98%8E%E4%BB%A3%E7%90%86%E7%BD%91%E5%85%B3%E5%9C%A8-ubuntu" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook tproxy é€æ˜ä»£ç†ç½‘å…³åœ¨ Ubuntu</h3>

<pre><code>systemctl stop systemd-resolved
</code></pre>

<pre><code>brook tproxy --link &#39;brook://...&#39; --dnsListen :53
</code></pre>

<ol>
<li>You may need to manually configure the computer or mobile gateway and DNS.</li>
</ol>
<h3><a name="å®˜ç½‘åŸç‰ˆ-openwrt-å›¾å½¢å®¢æˆ·ç«¯" class="anchor" href="#%E5%AE%98%E7%BD%91%E5%8E%9F%E7%89%88-openwrt-%E5%9B%BE%E5%BD%A2%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
å®˜ç½‘åŸç‰ˆ OpenWrt å›¾å½¢å®¢æˆ·ç«¯</h3>

<blockquote>
<p><strong>ä¾èµ–: ca-certificates openssl-util ca-bundle coreutils-nohup iptables-mod-tproxy</strong></p>
</blockquote>

<p><strong>ç«¯å£ 9999, 1080, 5353 å°†ä¼šè¢«ä½¿ç”¨</strong>. å®ƒä¸ brook server, brook wsserver, brook wssserver ä¸€èµ·å·¥ä½œ.</p>

<ol>
<li>ä¸‹è¼‰é©åˆä½ ç³»çµ±çš„<a href="https://github.com/txthinking/brook/releases" rel="nofollow">ipk</a>æ–‡ä»¶</li>
<li>ä¸Šå‚³ä¸¦å®‰è£: OpenWrt Web -&gt; System -&gt; Software -&gt; Upload Package...</li>
<li>åˆ·æ–°é é¢, é ‚éƒ¨èœå–®æœƒå‡ºç¾ Brook æŒ‰éˆ•</li>
<li>OpenWrt Web -&gt; Brook -&gt; è¼¸å…¥å¾Œé»æ“Š Connect</li>
<li>OpenWrt DNS forwardings: OpenWrt Web -&gt; Network -&gt; DHCP and DNS -&gt; General Settings -&gt; DNS forwardings -&gt; 127.0.0.1#5353</li>
<li>OpenWrt Ignore resolve file: OpenWrt Web -&gt; Network -&gt; DHCP and DNS -&gt; Resolv and Hosts Files -&gt; Ignore resolve file</li>
<li>é»˜èª, OpenWrt å°‡æœƒä¸‹ç™¼ router çš„ IP ç‚ºé›»è…¦æˆ–æ‰‹æ©Ÿçš„ç¶²é—œå’Œ DNS</li>
</ol>
<h3><a name="brook-relay-å¯ä»¥ä¸­ç»§ä»»ä½•-tcp-å’Œ-udp-server-è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½-å®ƒä¸ä¾èµ–-brook-server-wsserver-wssserver" class="anchor" href="#brook-relay-%E5%8F%AF%E4%BB%A5%E4%B8%AD%E7%BB%A7%E4%BB%BB%E4%BD%95-tcp-%E5%92%8C-udp-server-%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%8A%9F%E8%83%BD-%E5%AE%83%E4%B8%8D%E4%BE%9D%E8%B5%96-brook-server-wsserver-wssserver" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook relay å¯ä»¥ä¸­ç»§ä»»ä½• TCP å’Œ UDP server, è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½, å®ƒä¸ä¾èµ– brook server wsserver wssserver</h3>

<pre><code>SRC --TCP--&gt; brook relay --TCP--&gt; DST
SRC --UDP--&gt; brook relay --UDP--&gt; DST
</code></pre>

<pre><code>brook relay --from :9999 --to 1.2.3.4:9999
</code></pre>
<h3><a name="brook-socks5tohttp-å°†-socks5-proxy-è½¬æ¢ä¸º-http-proxy" class="anchor" href="#brook-socks5tohttp-%E5%B0%86-socks5-proxy-%E8%BD%AC%E6%8D%A2%E4%B8%BA-http-proxy" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook socks5tohttp å°† socks5 proxy è½¬æ¢ä¸º http proxy</h3>

<pre><code>brook socks5tohttp --socks5 127.0.0.1:1080 --listen 127.0.0.1:8010
</code></pre>
<h3><a name="brook-pac-åˆ›å»ºä¸€ä¸ª-pac-server" class="anchor" href="#brook-pac-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-pac-server" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook pac åˆ›å»ºä¸€ä¸ª pac server</h3>

<pre><code>brook pac --listen 127.0.0.1:8080 --proxy &#39;SOCKS5 127.0.0.1:1080; SOCKS 127.0.0.1:1080; DIRECT&#39; --bypassDomainList ...
</code></pre>
<h3><a name="brook-pac-åˆ›å»ºä¸€ä¸ª-pac-æ–‡ä»¶" class="anchor" href="#brook-pac-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-pac-%E6%96%87%E4%BB%B6" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook pac åˆ›å»ºä¸€ä¸ª pac æ–‡ä»¶</h3>

<pre><code>brook pac --file proxy.pac --proxy &#39;SOCKS5 127.0.0.1:1080; SOCKS 127.0.0.1:1080; DIRECT&#39; --bypassDomainList ...
</code></pre>
<h3><a name="ipv6" class="anchor" href="#ipv6" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
IPv6</h3>

<table>
<thead>
<tr>
<th>Command/Client</th>
<th>Remark</th>
<th>Support IPv4</th>
<th>Support IPv6</th>
</tr>
</thead>

<tbody>
<tr>
<td>brook server</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook client</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook wsserver</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook wsclient</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook wssserver</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook wssclient</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook relayoverbrook</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook dns</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook tproxy</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes/2</td>
</tr>

<tr>
<td>brook connect</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook relay</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook socks5</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook socks5tohttp</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>brook hijackhttps</td>
<td>CLI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>macOS Client</td>
<td>GUI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>Windows Client</td>
<td>GUI</td>
<td>Yes</td>
<td>Yes/2</td>
</tr>

<tr>
<td>iOS Client</td>
<td>GUI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>Android Client</td>
<td>GUI</td>
<td>Yes</td>
<td>Yes</td>
</tr>

<tr>
<td>OpenWrt Client</td>
<td>GUI</td>
<td>Yes</td>
<td>Yes/2</td>
</tr>
</tbody>
</table>
<h3><a name="nat-type" class="anchor" href="#nat-type" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
NAT Type</h3>

<p>Symmetric</p>
<h2><a name="ä½¿ç”¨-joker-è¿è¡Œå®ˆæŠ¤è¿›ç¨‹" class="anchor" href="#%E4%BD%BF%E7%94%A8-joker-%E8%BF%90%E8%A1%8C%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
ä½¿ç”¨ joker è¿è¡Œå®ˆæŠ¤è¿›ç¨‹</h2>

<p>ä½¿ç”¨ nami å®‰è£… <a href="https://github.com/txthinking/joker" rel="nofollow">joker</a></p>

<pre><code>nami install joker
</code></pre>

<p>ä½¿ç”¨ joker è¿è¡Œ brook å®ˆæŠ¤è¿›ç¨‹, åªéœ€è¦åœ¨åŸæ¥å‘½ä»¤å‰é¢åŠ ä¸Š joker</p>

<pre><code>joker brook ...
</code></pre>

<p>æŸ¥çœ‹æœ€åä¸€ä¸ªå‘½ä»¤çš„ ID</p>

<pre><code>joker last
</code></pre>

<p>æŸ¥çœ‹æŸä¸ªå‘½ä»¤çš„è¾“å‡ºå’Œé”™è¯¯</p>

<pre><code>joker log &lt;ID&gt;
</code></pre>

<p>æŸ¥çœ‹è¿è¡Œçš„å‘½ä»¤åˆ—è¡¨</p>

<pre><code>joker list
</code></pre>

<p>åœæ­¢æŸä¸ªå‘½ä»¤</p>

<pre><code>joker stop &lt;ID&gt;
</code></pre>
<h2><a name="ä½¿ç”¨-jinbe-æ·»åŠ å¼€æœºè‡ªå¯åŠ¨å‘½ä»¤" class="anchor" href="#%E4%BD%BF%E7%94%A8-jinbe-%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
ä½¿ç”¨ jinbe æ·»åŠ å¼€æœºè‡ªå¯åŠ¨å‘½ä»¤</h2>

<p>ä½¿ç”¨ nami å®‰è£… <a href="https://github.com/txthinking/jinbe" rel="nofollow">jinbe</a></p>

<pre><code>nami install jinbe
</code></pre>

<p>ä½¿ç”¨ jinbe æ·»åŠ å¼€æœºè‡ªå¯åŠ¨å‘½ä»¤ï¼Œåªéœ€è¦åœ¨åŸæ¥å‘½ä»¤å‰é¢åŠ ä¸Š jinbe</p>

<pre><code>jinbe joker brook ...
</code></pre>

<p>æŸ¥çœ‹æ·»åŠ çš„å¼€æœºå‘½ä»¤</p>

<pre><code>jinbe list
</code></pre>

<p>ç§»é™¤æŸä¸ªå¼€æœºå‘½ä»¤</p>

<pre><code>jinbe remove &lt;ID&gt;
</code></pre>
<h2><a name="protocol" class="anchor" href="#protocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
Protocol</h2>
<h3><a name="brook-server-protocol" class="anchor" href="#brook-server-protocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook server protocol</h3>

<p><a href="protocol/brook-server-protocol.html" rel="nofollow">brook-server-protocol.md</a></p>
<h3><a name="brook-wsserver-protocol" class="anchor" href="#brook-wsserver-protocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook wsserver protocol</h3>

<p><a href="protocol/brook-wsserver-protocol.html" rel="nofollow">brook-wsserver-protocol.md</a></p>
<h3><a name="brook-wssserver-protocol" class="anchor" href="#brook-wssserver-protocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook wssserver protocol</h3>

<p><a href="protocol/brook-wssserver-protocol.html" rel="nofollow">brook-wssserver-protocol.md</a></p>
<h3><a name="withoutbrookprotocol-protocol" class="anchor" href="#withoutbrookprotocol-protocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
withoutBrookProtocol protocol</h3>

<p><a href="protocol/withoutbrookprotocol-protocol.html" rel="nofollow">withoutbrookprotocol-protocol.md</a></p>
<h3><a name="brook-link-protocol" class="anchor" href="#brook-link-protocol" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
brook link protocol</h3>

<p><a href="protocol/brook-link-protocol.html" rel="nofollow">brook-link-protocol.md</a></p>
<h2><a name="å…¶ä»–èµ„æº" class="anchor" href="#%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90" rel="nofollow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
å…¶ä»–èµ„æº</h2>

<ul>
<li>Brook å·¥ä½œåŸç†: <a href="https://talks.txthinking.com/articles/brook.article" rel="nofollow">https://talks.txthinking.com/articles/brook.article</a></li>
<li>brook wsserver æ­é… Cloudflare CDN: <a href="https://www.youtube.com/watch?v=KFzS55bUk6A" rel="nofollow">https://www.youtube.com/watch?v=KFzS55bUk6A</a></li>
<li>ç”¨ nico å°† brook wsserver åŒ…è£…æˆä»»æ„ https ç½‘ç«™: <a href="https://talks.txthinking.com/articles/nico-brook-wsserver.article" rel="nofollow">https://talks.txthinking.com/articles/nico-brook-wsserver.article</a></li>
<li>Brook, Shadowsocks, V2ray åè®®å±‚é¢çš„åŒºåˆ«: <a href="https://www.youtube.com/watch?v=WZSfZU6rgbQ" rel="nofollow">https://www.youtube.com/watch?v=WZSfZU6rgbQ</a></li>
<li>åšå®¢: <a href="https://talks.txthinking.com" rel="nofollow">https://talks.txthinking.com</a></li>
<li>Youtube é¢‘é“: <a href="https://www.youtube.com/txthinking" rel="nofollow">https://www.youtube.com/txthinking</a></li>
<li>è§„åˆ™åˆ—è¡¨: <a href="https://github.com/txthinking/bypass" rel="nofollow">https://github.com/txthinking/bypass</a></li>
<li><a href="https://ipip.ooo" rel="nofollow">https://ipip.ooo</a></li>
<li>è®ºå›: <a href="https://github.com/txthinking/brook/discussions" rel="nofollow">https://github.com/txthinking/brook/discussions</a></li>
<li>Telegram ç¾¤: <a href="https://t.me/brookgroup" rel="nofollow">https://t.me/brookgroup</a></li>
<li>News: <a href="https://t.me/txthinking_news" rel="nofollow">https://t.me/txthinking_news</a></li>
<li>Chrome Extension: <a href="https://chrome.google.com/webstore/detail/hnpgnjkeaobghpjjhaiemlahikgmnghb" rel="nofollow">Socks5 Configurator</a></li>
</ul>
</body>
</html>